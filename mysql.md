# MySQL学习笔记 #
-----------------
### 行级锁定
- **共享锁：**允许一个事物读一行数据时，阻止其他的事物读取相同数据的排他锁。
- **排他锁：**允许获得排他锁的事物更新数据，阻止其他事物取得相同数据的共享锁和排他锁。
- **意向共享锁：**事物打算给数据行加行共享锁。事务在给一个数据行加共享锁前必须先取得该表的意向共享锁。
- **意向排他锁：**事物打算给数据行加行排他锁。事物在给一个数据行加排他锁前必须先取得该表的意向排他锁。

### 表级锁定
- **读锁定**
- **写锁定**

## InnoDB行级锁
### ACID特性
- **原子性：**一个原子事务要么完整执行，要么干脆不执行。
- **一致性：**一致性代表了底层数据存储的完整性。
- **隔离性：**意味着事务必须在不干扰其他进程或事务的前提下独立执行。
- **持久性：**事务成功后，数据将会被持久化到数据库中。

### 并发时存在的问题
- **更新丢失（应完全避免）：**两个事务同时更新一行数据，但事务2却中途失败退出了，导致两个修改都失效。
- **脏读：**事务1更新了记录但没有提交，事务2读取了更新后的行，导致事务1回滚，现在2读取无效。
- **不可重复读：**事务1读取记录时，事务2更新了记录并提交，事务1再次读取时可以看到事务2修改后的记录。
- **幻读：**事务1读取记录时事务2增加了记录并提交，事务1再次读取时可以看到事务2新增的记录。

### 数据库隔离级别
- **READ UNCOMMITTED（未提交读）**：幻读，不可重复读和脏读均允许；
- **READ COMMITTED（已提交读）**：允许幻读和不可重复读，但不允许脏读；
- **REPEATABLE READ（可重复读）**：允许幻读，但不允许不可重复读和脏读；
- **SERIALIZABLE（可序列化）**:幻读，不可重复读和脏读都不允许； 
- ORACLE默认的是 READ COMMITTED